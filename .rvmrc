#!/usr/bin/env bash

#
# The following is cribbed directly from the rvm-site project. It's a more
# convenient way of ensuring we're using the correct gemset, or initializing it
# if need be.
#

ruby_name="ruby-1.9.2"
gemset_name="em-jack"
environment_id="$ruby_name@$gemset_name"

#
# First we attempt to load the desired environment directly from the environment
# file, this is very fast and efficient compared to running through the entire
# CLI and selector. If you want feedback on which environment was used then
# insert the word 'use' after --create as this triggers verbose mode.
#

if [[ -d "${rvm_path:-$HOME/.rvm}/environments" \
  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]] ; then
    \. "${rvm_path:-$HOME/.rvm}/environments/$environment_id"
else
  # If the environment file has not yet been created, use the RVM CLI to select.
  rvm --create use "$environment_id"
fi
